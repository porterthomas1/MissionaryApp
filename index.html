<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mental Health App</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header>Missionary Mind</header>

    <!-- Circular button linking to checkin.html -->
    <a href="checkin.html" class="circular-button">Check-in</a>

    <div id="resourcesContainer">
      <h2>Resources</h2>
      <!-- Add your calendar here -->
      <div id="resources">
        <!-- Calendar content goes here -->
      </div>
    </div>

    <!-- Add a section to display submitted check-ins -->
    <div id="checkinHistoryContainer">
      <h2>Check-in History</h2>
      <ul id="checkInHistory"></ul>
    </div>

    <footer>Â© 2023 Missionary Mind</footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Retrieve check-in history from localStorage and display it
        var checkInHistory =
          JSON.parse(localStorage.getItem("checkInHistory")) || [];
        updateCheckInList(checkInHistory);
      });

      function updateCheckInList(checkInHistory) {
        var checkInHistoryElement = document.getElementById("checkInHistory");

        // Clear existing content
        checkInHistoryElement.innerHTML = "";

        // Display check-in history
        checkInHistory.forEach(function (checkIn, index) {
          var listItem = document.createElement("li");

          // Display check-in text and date
          listItem.innerHTML =
            "<span class='checkInEmoji'>" +
            checkIn.emoji +
            "<span class='checkInText'>" +
            checkIn.text +
            "</span><span class='checkInDate'>" +
            checkIn.date +
            "</span>";

          // Add a button to remove the check-in
          var removeButton = document.createElement("button");
          removeButton.innerText = "Remove";
          removeButton.className = "removeButton";
          removeButton.onclick = function () {
            removeCheckIn(index);
          };

          // Append the remove button to the list item
          listItem.appendChild(removeButton);

          // Append the list item to the check-in history
          checkInHistoryElement.appendChild(listItem);
        });
      }

      // Function to remove a check-in from the history
      function removeCheckIn(index) {
        var checkInHistory =
          JSON.parse(localStorage.getItem("checkInHistory")) || [];

        // Remove the check-in at the specified index
        checkInHistory.splice(index, 1);

        // Save the updated check-in history to localStorage
        localStorage.setItem("checkInHistory", JSON.stringify(checkInHistory));

        // Update the displayed check-in history
        updateCheckInList(checkInHistory);
      }
    </script>
  </body>
</html>
